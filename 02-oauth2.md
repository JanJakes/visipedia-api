# 2. Oauth2

OAuth2 is a protocol that lets external applications request user's private data without getting their password.

## 2.1 Application registration
First of all the developers must register their application on ___. The reqistration process will assign the application a unique `client_id` and `client_secret`.

## 2.2 OAuth2 flow for web applications

1. **Authorization request**

   In your application redirect the user to the Visipedia OAuth2 server:
   ```
   GET https://visipedia.org/oauth2/authorize
   ```

   Parameters:

   | Name          | Type   | Necessity   | Description |
   | ------------- | ------ | ----------- |------------ |
   | client_id     | string | REQUIRED    | The `client_id` for your application obtained during the registration. |
   | response_type | string | REQUIRED    | Acoording to the [OAuth2 RFC](http://tools.ietf.org/html/rfc6749) it's value must be set to `code`. |
   | redirect_uri  | string | OPTIONAL    | The URI where the user will be redirected after authorization. If not provided the URI from your app settings will be used. |
   | scope         | string | OPTIONAL    | A list of space-delimited scopes. Scopes are case-sensitive strings. |
   | state         | string | RECOMMENDED | This parameter should contain an unguessable random string. It is used as a protection against [CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery). |

   The user will se a screen asking him to authorize Visipedia to give your app the requested scopes.

2. **Authorization response**

   When the user accepts your request, Visipedia redirects back to your site.
   Parameters:

   | Name     | Type   | Description |
   | ---------| ------ | ----------- |
   | **code** | string | The authorization code generated by the server. |
   | state    | string | The state passed in the client authorization request. If the received state is not identical to the previously passed one, the whole process should be aborted. |

3. **Access token request**

   ```
   POST https://visipedia.org/oauth2/access_token
   ```

   Parameters:

   | Name          | Type   | Necessity   | Description |
   | ------------- | ------ | ----------- | ----------- |
   | client_id     | string | The `client_id` for your application obtained during the registration. |
   | client_secret | string | The `client_secret` for your application obtained during the registration. |
   | grant_type    | string | Acoording to the [OAuth2 RFC](http://tools.ietf.org/html/rfc6749) it's value must be set to `authorization_code`. |
   | code          | string | The code received in the previous step. |
   | redirect_uri  | string | ... |

4. **Access token response**
   
5. **Using the access token**
